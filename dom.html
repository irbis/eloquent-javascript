<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My home page</title>
</head>
<body>
<h1>My home page</h1>
<p>Hello, I am Marijn and this is my home page.</p>
<p>I also wrote a book! Read it
    <a href="https://eloquentjavascript.net">here</a>.</p>

<p id="pId">Paragraph with ID.</p>

<p id="pOne">One</p>
<p id="pTwo">Two</p>
<p id="pThree">Three</p>

<p>The <img src="https://placekitten.com/g/200/300" alt="Cat"> in the
    <img src="hat.png" alt="Hat">.</p>

<blockquote id="quote">
    No book can ever be finished. While working on it we learn just enought
    to find it immature the moment we turn away from it.
</blockquote>

<p data-classified="secret">The launch code is 00000000.</p>
<p data-classified="unclassified">I have to feet.</p>

<p><input type="button" onclick="console.log(talksAbout(document.body, 'book'))"
       value="Run talksAbout()"/></p>

<p><input type="button" onclick="getAhrefElement()"
          value="Run getAhrefElement()"/></p>

<p><input type="button" onclick="getPWithId()"
          value="Run getPWithId()"/></p>

<p><input type="button" onclick="modifyParagraphs()"
          value="Run modifyParagraphs()"/></p>

<p><input type="button" onclick="replaceImages()"
          value="Run replaceImages()"/></p>

<p><input type="button" onclick="replaceQuote()"
          value="Run replaceQuote()"/></p>

<p><input type="button" onclick="changeAttributes()"
          value="Run changeAttributes()"/></p>

</body>
<script>
    function talksAbout(node, string) {
        if (node.nodeType == Node.ELEMENT_NODE) {
            for (let child of node.childNodes) {
                if (talksAbout(child, string)) {
                    return true
                }
            }
            return false
        } else if (node.nodeType == Node.TEXT_NODE) {
            return node.nodeValue.indexOf(string) > -1
        }
    }

    function getAhrefElement() {
        let link = document.body.getElementsByTagName("a")[0]
        console.log(link.href)
    }

    function getPWithId() {
        let p = document.getElementById("pId")
        console.log(p.innerText)
    }

    function modifyParagraphs() {
        let paragraphs = document.body.getElementsByTagName("p")
        document.body.insertBefore(paragraphs[4], paragraphs[3])
    }

    function replaceImages() {
        let images = document.body.getElementsByTagName("img")
        for (let i = images.length - 1; i >= 0; i--) {
            let image = images[i]
            if (image.alt) {
                let text = document.createTextNode(image.alt)
                image.parentNode.replaceChild(text, image)
            }
        }
    }

    function elt(type, ...children) {
        let node = document.createElement(type)
        for (let child of children) {
            if (typeof child != "string") node.appendChild(child)
            else node.appendChild(document.createTextNode(child))
        }
        return node
    }

    function replaceQuote() {
        document.getElementById("quote").appendChild(
            elt("footer", "-",
                elt("strong", "Karl Popper"),
                ", preface to the second edition of ",
                elt("em", "The Open Society and Its Enemies"),
                ", 1950"))
    }

    function changeAttributes() {
        let paras = document.body.getElementsByTagName("p")
        for (let para of Array.from(paras)) {
            if (para.getAttribute("data-classified") == "secret") {
                para.remove()
            }
        }
    }
</script>
</html>